"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.actionCorsMiddleware = exports.createActionHeaders = void 0;
const constants_js_1 = require("./constants.js");
/**
 * Construct valid headers for use with Action APIs
 */
function createActionHeaders({ headers, chainId, actionVersion, } = {}) {
    if (chainId) {
        headers = Object.assign({}, headers || {}, {
            "X-Blockchain-Ids": Object.hasOwn(constants_js_1.BLOCKCHAIN_IDS, chainId)
                ? constants_js_1.BLOCKCHAIN_IDS[chainId]
                : chainId,
        });
    }
    if (actionVersion) {
        headers = Object.assign({}, headers || {}, {
            "X-Action-Version": actionVersion.toString(),
        });
    }
    if (headers)
        return Object.assign({}, constants_js_1.ACTIONS_CORS_HEADERS, headers);
    else
        return constants_js_1.ACTIONS_CORS_HEADERS;
}
exports.createActionHeaders = createActionHeaders;
/**
 * Middleware to enable proper CORS headers for Action APIs
 */
function actionCorsMiddleware(args) {
    return (_req, res, next) => {
        res.set(createActionHeaders(args));
        next();
    };
}
exports.actionCorsMiddleware = actionCorsMiddleware;
//# sourceMappingURL=utils.js.map