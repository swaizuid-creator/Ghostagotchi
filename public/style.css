:root {
   --bg: #0b0b11;
   --card: #171726;
   --text: #eef1ff;
   --muted: #a6a8b8;
   --accent: #ff7a1a;
   --accent2: #ffb347;
   --good: #2ecc71;
   --bad: #ff4d4f;
}

/* ===== Basis & Lay-out ===== */
* {
   box-sizing: border-box;
}

html,
body {
   height: 100%;
}

body {
   margin: 0;
   color: var(--text);
   /* Verbeterde gradient voor betere diepte */
   background: radial-gradient(1200px 800px at 15% 10%, #1a1a27, #0b0b11);
   font-family: system-ui, Segoe UI, Roboto, Inter, Arial, sans-serif;
   overflow-x: hidden;
}

/* decoratieve glows */
#bg-decor:before,
#bg-decor:after {
   content: "";
   position: fixed;
   border-radius: 50%;
   pointer-events: none;
   filter: blur(70px);
   opacity: .25;
}

#bg-decor:before {
   width: 520px;
   height: 520px;
   background: #7e11ff;
   left: -160px;
   top: -140px;
}

#bg-decor:after {
   width: 620px;
   height: 620px;
   background: #ff5e00;
   right: -220px;
   bottom: -180px;
}

.wrap {
   max-width: 1280px;
   margin: 0 auto;
   padding: 24px;
}

/* hoofdgrid: content links, log rechts */
.layout {
   display: grid;
   grid-template-columns: 1fr 420px; /* 1fr zorgt dat de content de resterende ruimte inneemt */
   gap: 18px;
}

@media (max-width:1100px) {
   .layout {
      grid-template-columns: 1fr;
   }
}

/* ===== TOP BAR (Aangepast voor actieknoppen) ===== */
.topbar {
   display: flex;
   flex-wrap: wrap; 
   align-items: center;
   justify-content: space-between;
   gap: 12px;
}
.topbar h1 {
   margin: 0;
   flex-grow: 1;
}

.header-actions {
   display: flex;
   align-items: center;
   gap: 10px;
   flex-wrap: wrap;
}

.controls {
   display: flex;
   gap: 12px;
   align-items: center;
}

.mute {
   padding: 8px 12px;
   border: 1px solid #2a2a3a;
   border-radius: 8px;
   background: #1e1e2b;
   color: var(--text);
   cursor: pointer;
}

.mute:hover {
   background: #232335;
}

#vol {
   width: 120px; 
}
.sub {
   color: var(--muted);
   margin: 6px 0 14px;
}

.col-main {
   **flex: 1;** /* Fix: Zorgt dat de kolom de beschikbare ruimte neemt */
   min-width: 0;
}

.col-side {
   **width: 420px;** /* Fix: Zorgt dat de log de juiste vaste breedte behoudt */
   min-width: 0;
}

/* ===== Cards ===== */
.card {
   background: linear-gradient(180deg, rgba(23, 23, 38, .92), rgba(14, 14, 22, .92));
   border: 1px solid rgba(255, 255, 255, .06);
   border-radius: 20px;
   padding: 18px;
   box-shadow: 0 10px 50px rgba(0, 0, 0, .35), inset 0 0 0 1px rgba(255, 255, 255, .02);
   backdrop-filter: blur(6px);
   margin-bottom: 18px;
}

/* ===== HERO: spook boven de stats ===== */
.head {
   display: flex;
   flex-direction: column;
   align-items: center;
   gap: 20px;
   padding-block: 22px;
   **position: relative;** /* Fix: Anker voor de chat bubble */
}

/* groot spookkader */
.avatar-wrap {
   width: 420px;
   height: 420px;
   border-radius: 28px;
   background: #151523;
   display: grid;
   place-items: center;
   position: relative;
   overflow: hidden;
   box-shadow: inset 0 0 0 1px rgba(255, 255, 255, .05), 0 12px 36px rgba(0, 0, 0, .45);
}

/* zachte glow achter het spook */
.avatar-glow {
   position: absolute;
   inset: 0;
   pointer-events: none;
   background: radial-gradient(circle at 60% 40%, rgba(255, 168, 64, .35), rgba(255, 168, 64, 0) 55%);
   filter: blur(18px);
}

/* het spook zelf (~400px) */
.avatar {
   width: 400px;
   image-rendering: pixelated;
   filter: drop-shadow(0 0 36px rgba(255, 255, 255, .48));
   animation: float 2.3s ease-in-out infinite;
}

@keyframes float {
   0%,
   100% {
      transform: translateY(0);
   }
   50% {
      transform: translateY(-10px);
   }
}

/* waarschuwingstipje */
.attention {
   position: absolute;
   right: 10px;
   bottom: 10px;
   background: var(--bad);
   color: #fff;
   border-radius: 12px;
   font-size: 13px;
   line-height: 1;
   padding: 6px 8px;
   box-shadow: 0 0 14px rgba(255, 59, 59, 0.45);
}

/* statsblok onder het spook */
.head-right {
   width: 100%;
   max-width: 980px;
}

.head-right .row {
   display: flex;
   gap: 16px;
   flex-wrap: wrap;
   align-items: center;
}

.memoji {
   margin-left: 8px;
   font-size: 20px;
   opacity: .9;
}

/* NIEUW: Levenscyclus & Huidige actie */
.head-info {
   display: flex;
   justify-content: space-between;
   align-items: flex-end; /* Zorgt ervoor dat de tekst onderaan uitlijnt */
   margin-bottom: 12px;
}

.lifecycle {
   text-align: left;
}
.lifecycle h3 {
   margin: 0 0 4px 0;
   font-size: 1.2em;
   color: var(--accent2);
}
.lifecycle span {
   color: var(--muted);
   font-size: 0.9em;
}


/* balken */
.bars {
   display: grid;
   grid-template-columns: 180px 1fr;
   gap: 12px 18px;
   margin: 12px 0 6px;
}

label {
   color: var(--muted);
}

progress {
   width: 100%;
   height: 18px;
   border: none;
   background: #262636;
   border-radius: 10px;
   overflow: hidden;
}

progress::-webkit-progress-bar {
   background: #262636;
}

progress::-webkit-progress-value {
   background: linear-gradient(90deg, var(--accent), var(--accent2));
}

.last {
   color: var(--muted);
   margin-top: 4px;
}

/* ===== Survival & Progress ===== */
.survival .surv-head {
   display: flex;
   align-items: center;
   justify-content: space-between;
   gap: 14px;
   flex-wrap: wrap;
}

.survival .pair-info {
   color: var(--muted);
}

.sep {
   opacity: .6;
   margin: 0 8px;
}

.progress-wrap {
   display: flex;
   align-items: center;
   gap: 12px;
   margin: 12px 0;
}

.progress-wrap.jumbo .progress-bar {
   height: 28px;
   border-radius: 16px;
}

.progress-bar {
   flex: 1;
   height: 22px;
   background: #262636;
   border-radius: 14px;
   overflow: hidden;
   position: relative;
   transition: box-shadow 0.3s ease-out; /* Animatie toevoegen aan box-shadow */
}

#progressFill {
   height: 100%;
   width: 0%;
   background: linear-gradient(90deg, var(--accent), var(--accent2));
   box-shadow: 0 0 18px rgba(255, 160, 50, .45);
   transition: width .3s;
}

.progress-bar.glow {
   box-shadow: 0 0 10px var(--accent);
}

/* Pulsating effect for near goal */
.progress-bar.pulse #progressFill {
   animation: pulse 1.5s infinite;
}
.progress-bar.pulse-fast #progressFill {
   animation: pulse 0.8s infinite;
}
@keyframes pulse {
   0% { box-shadow: 0 0 18px rgba(255, 160, 50, .45); }
   50% { box-shadow: 0 0 28px rgba(255, 160, 50, .8); }
   100% { box-shadow: 0 0 18px rgba(255, 160, 50, .45); }
}


.progress-label {
   min-width: 72px;
   text-align: right;
   color: #ffd9b3;
   font-weight: 800;
   font-size: 20px;
}

.good {
   color: var(--good);
}

.bad {
   color: var(--bad);
}

.next strong {
   color: #ffd28f;
}

/* Streak-badge */
.streak-badge {
   display: inline-flex;
   align-items: center;
   gap: 8px;
   margin-top: 8px;
   background: #251a11;
   border: 1px solid rgba(255, 180, 120, .35);
   color: #ffd8b2;
   padding: 8px 12px;
   border-radius: 999px;
   font-weight: 800;
}

/* ===== Hype Bar (AANGEPAST) ===== */
.hype-bar {
   width: 100%;
   height: 24px;
   background: #262636;
   border-radius: 12px;
   overflow: hidden;
   position: relative;
   margin-top: 8px;
}

#hype-fill {
   height: 100%;
   width: 0%;
   background: linear-gradient(90deg, #ff7a1a, #ffb347);
   box-shadow: 0 0 18px rgba(255, 160, 50, .65);
   transition: width .3s;
}

/* Hype label binnen de bar centreren */
.hype-bar-inner {
   position: absolute;
   inset: 0;
   display: flex;
   align-items: center;
   justify-content: center;
   color: var(--text);
   font-weight: 700;
   text-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
   pointer-events: none;
}

/* ===== CTA & QR & Buttons ===== */
.cta .cta-row {
   display: flex;
   gap: 10px;
   align-items: center;
   flex-wrap: wrap;
}

.cta-btn {
   background: var(--accent);
   color: #111;
   padding: 12px 16px;
   border-radius: 12px;
   font-weight: 800;
   text-decoration: none;
   box-shadow: 0 6px 20px rgba(255, 106, 0, .35);
   transition: box-shadow 0.3s;
}

.cta-btn:hover {
   filter: brightness(1.05);
}

.ghost-btn {
   padding: 10px 12px;
   border: 1px solid #2a2a3a;
   border-radius: 10px;
   background: #1e1e2b;
   color: var(--text);
   cursor: pointer;
}

/* Community buttons in header zijn ook .ghost-btn, maar we geven ze meer padding in de header */
.header-actions .ghost-btn {
   padding: 12px 16px; 
}

.qr {
   margin-top: 10px;
}

.qr img {
   width: 160px;
   height: 160px;
   background: #fff;
   border-radius: 8px;
   padding: 6px;
}

.cta-btn.highlight {
   box-shadow: 0 0 24px rgba(255, 106, 0, .75);
}

/* Lore Modal stijlen */
.lore-modal {
   position: fixed;
   top: 50%;
   left: 50%;
   transform: translate(-50%, -50%);
   max-width: 500px;
   padding: 30px;
   z-index: 1001;
   border: 2px solid var(--accent);
   box-shadow: 0 0 50px rgba(0, 0, 0, 0.7);
   background: var(--card); /* Zorgt voor overlay-look */
}


/* ===== Callout ===== */
.callout {
   display: flex;
   align-items: center;
   gap: 12px;
}

/* ===== Log (rechts) ===== */
.log .log-header {
   display: flex;
   align-items: center;
   justify-content: space-between;
}

.log ul,
.log li {
   list-style: none;
   margin: 0;
   padding: 0;
}

.log li {
   padding: 8px 0;
   border-bottom: 1px solid #262636;
   color: #d6d6dd;
}

.log ul li:nth-child(n+16) {
   display: none;
}

/* ===== Toast & Overlays (confetti/bubble) ===== */
.toast {
   position: fixed;
   left: 50%;
   bottom: 22px;
   transform: translateX(-50%);
   background: rgba(28, 28, 40, .92);
   color: #fff;
   padding: 12px 16px;
   border-radius: 12px;
   box-shadow: 0 10px 40px rgba(0, 0, 0, .4);
   z-index: 1000;
   font-weight: 700;
   display: none;
}
.toast.show {
   display: block;
}

/* Confetti */
#confettiLayer {
   position: fixed;
   left: 0;
   top: 0;
   width: 100vw;
   height: 100vh;
   pointer-events: none;
   overflow: hidden;
}

#confettiLayer i {
   position: absolute;
   top: -10%;
   font-style: normal;
   animation: fall 1.8s linear forwards;
}

@keyframes fall {
   to {
      transform: translateY(120vh) rotate(720deg);
      opacity: .95;
   }
}

/* Chat bubble */
.bubble {
   position: absolute;
   left: 440px; /* Fix: Positie ten opzichte van .head container */
   top: 12px;
   max-width: 280px;
   background: #222336;
   color: #eaeaf2;
   padding: 10px 12px;
   border-radius: 12px;
   box-shadow: 0 6px 24px rgba(0, 0, 0, .35);
   font-weight: 600;
   line-height: 1.25;
   z-index: 2;
}

.bubble::after {
   content: "";
   position: absolute;
   left: -8px;
   top: 16px;
   width: 0;
   height: 0;
   border-top: 8px solid transparent;
   border-bottom: 8px solid transparent;
   border-right: 8px solid #222336;
}

@media (max-width:1100px) {
   .bubble {
      left: 50%;
      transform: translateX(-50%);
      top: -14px;
   }
   .bubble::after {
      display: none;
   }
}